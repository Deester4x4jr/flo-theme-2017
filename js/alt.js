function check_maps(){var e=theMap.attr("style");"undefined"==typeof e?setTimeout(check_maps,250):jQuery("#page-loader").fadeOut("fast",function(){jQuery("#page-loader").remove(),theMap.addClass("show"),theForm.addClass("show"),jQuery("body").addClass("loaded")})}function init_maps(){jQuery(".wpsl-error").remove(),check_maps()}function setup_results(e,s){s?mapResults.removeClass("no-results").html(e).promise().done(function(){mapResults.fadeIn("fast",function(){var e=mapResults.outerHeight(),s=mapResults.prop("scrollHeight");s==e&&mapResults.addClass("short-list")}),dispensaries=jQuery(".map-result"),dispensaries.on("click",function(){dispensaries.removeClass("active"),jQuery(this).addClass("active")})}):mapResults.addClass("no-results").html(e).promise().done(function(){mapResults.fadeIn()})}function wpsl_success(e,s,a){var t='<div class="map-result-header"><h3>Check it out!</h3><p>We found '+e+" dispensaries that carry FLO Products near you:</p></div>";jQuery.each(s,function(e,s){var a=s.output,r=document.createElement("div");r.innerHTML=a;var o=r.textContent||r.innerText||"",i=JSON.parse(o);t+='<div class="map-result infowindow-open map-link" onClick="event.preventDefault(); openInfoWindow('+e+');" data-location-id="'+s.id+'">',t+="<h5>"+s.title+"</h5>",t+='<p id="location-address" data-location-zip="'+i.Zip+'"><i class="fa fa-fw fa-map-marker"></i>'+i.Address+"</p>",t+='<p id="location-hours"><i class="fa fa-fw fa-clock-o"></i>'+i.Info+"</p>",t+="</div>"}),setup_results(t,!0)}function get_directions(e){var s=mapResults.find("[data-location-id="+e+"]"),a=s.find("#location-address"),t=s.find("h5").text(),r=screen.width/2-512,o=screen.height/2-384;a=a.text()+" "+a.attr("data-location-zip"),a=a.replace(/([,]|[\s])+/g,"+"),t=t.replace(/([,]|[\s])+/g,"+"),a="https://maps.google.com?daddr="+t+"+"+a+"&layer=t",window.open(a,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=1024,height=768,left="+r+",top="+o)}function wpsl_error(e,s){var a='<div class="map-result-header"><h3>Sorry about that...</h3><p>It looks like there was an error:</p><pre>'+e+"</pre><p>Please try again.</p></div>";setup_results(a,!1)}function wpsl_no_results(e,s){var a='<div class="map-result-header"><h3>Sorry about that...</h3><p>It looks like there are no dispensaries in your immediate area that carry our products right now.</p><p>Please try searching a different area.</p></div>';setup_results(a,!1)}function wpsl_before_submit(e,s){theForm.hasClass("map-form-left")||theForm.addClass("map-form-left"),dispensaries instanceof jQuery&&dispensaries.off("click"),mapResults.fadeOut().removeClass("short-list")}var theForm=jQuery("#map-form"),theMap=jQuery("#map-box"),submit=jQuery(".wpslsubmit"),mapResults=jQuery("#results-box"),dispensaries="";init_maps();